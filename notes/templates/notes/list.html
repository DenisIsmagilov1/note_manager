{% extends 'base.html' %}

{% block title %}Your notes{% endblock %}

{% block content %}
    <h1>Your notes</h1>
    {% for note in object_list %}
        <div class="note">
            <h2><a href="{% url 'notes:note_detail' note.id %}">{{ note.title }}</a></h2>
            <span><a href="#">{{ note.get_category_display }}</a></span>
            <p>{{ note.description|truncatewords:50|linebreaks }}</p>
            <span>{{ note.created }}</span>
            <div data-id="{{ note.id }}" class="score">
                {% if note.elect %}
                    <span class="elected">Elected</span>
                {% else %}
                    <span class="unelected">Unelected</span>
                {% endif %}
            </div>
            <span data-id="{{ note.id }}" class="delete">Delete</span>
        </div>
    {% empty %}
        <span>Your note list is empty. <a href="{% url 'notes:note_create' %}">Add your new note.</a></span>
    {% endfor %}
{% endblock %}
{##}
{#{% block domready %}#}
{#    $('.score').click(function (e) {#}
{#        e.preventDefault();#}
{#        var tag = $(this).find('span');#}
{#        var pre_class = $(this).find('span').attr('class');#}
{#        $.post(#}
{#            '{% url 'notes:note_elect' %}',#}
{#            {id: $(this).data('id'),#}
{#            function(){#}
{#                    tag.attr('class', null);#}
{#                    tag.addClass(pre_class == 'elected' ? 'unelected' : 'elected');#}
{#                    tag.text(pre_class == 'elected' ? 'Unelected' : 'Elected');#}
{#                }#}
{#            }#}
{#        )#}
{#    });#}
{#{% endblock %}#}
